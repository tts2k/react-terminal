"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("react"),t=e(n),r=e(require("prop-types")),o=require("react-device-detect"),a=function(){return(a=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function l(e,n){var t,r,o,a,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,r=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){l.label=a[1];break}if(6===a[0]&&l.label<o[1]){l.label=o[1],o=a;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(a);break}o[2]&&l.ops.pop(),l.trys.pop();continue}a=n.call(e,l)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.index_editor__2tqRz {\n  text-align: left;\n  height: 100%;\n  overflow-wrap: break-word;\n  overflow-y: scroll;\n  outline: none;\n  -ms-overflow-style: none;\n  scrollbar-width: none; }\n  .index_editor__2tqRz::-webkit-scrollbar {\n    display: none; }\n  .index_editor__2tqRz .index_mobileInput__jGtyc {\n    position: absolute;\n    top: -2000px;\n    left: -2000px; }\n  .index_editor__2tqRz .index_lineText__2Poex {\n    display: inline;\n    position: relative;\n    top: -0.0625em;\n    margin-left: 0.5em; }\n  .index_editor__2tqRz .index_preWhiteSpace__3nCT2 {\n    white-space: pre-wrap; }\n  .index_editor__2tqRz .index_caret__MYxcn {\n    position: relative;\n    animation: index_blink__RQDX- 0.75s ease-in-out infinite; }\n    .index_editor__2tqRz .index_caret__MYxcn .index_caretAfter__2B8sk {\n      background: currentColor;\n      content: "";\n      position: absolute;\n      top: 0.125em;\n      width: 0.125em;\n      height: 1.175em;\n      z-index: 10; }\n\n@keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n  .index_editor__2tqRz a {\n    color: inherit;\n    text-decoration: underline; }\n\n#index_terminalContainer__3q4m3 {\n  height: 100%; }\n\n.index_terminal__1dSq1 {\n  height: 100%;\n  width: 100%;\n  margin: auto; }\n');var i={editor:"index_editor__2tqRz",mobileInput:"index_mobileInput__jGtyc",lineText:"index_lineText__2Poex",preWhiteSpace:"index_preWhiteSpace__3nCT2",caret:"index_caret__MYxcn",blink:"index_blink__RQDX-",caretAfter:"index_caretAfter__2B8sk",terminalContainer:"index_terminalContainer__3q4m3",terminal:"index_terminal__1dSq1"},c=n.createContext(null),u=function(e){var t=e.children;return n.createElement(c.Provider,{value:i},t)},s={dark:{background:"#022833",color:"#839496",promptColor:"#a917a8",fontFamily:"monospace",fontSize:"18px",lineHeight:"1.5",padding:"1em"},light:{background:"#fdf6e4",themeToolbarColor:"#d8d8d8",color:"#333333",promptColor:"#a917a8",fontFamily:"monospace",fontSize:"18px",lineHeight:"1.5",padding:"1em"},"material-dark":{background:"#151515",themeToolbarColor:"#424242",color:"#fff",promptColor:"#42A5F5",fontFamily:"monospace",fontSize:"18px",lineHeight:"1.5",padding:"1em"},"material-light":{background:"#fafafa",themeToolbarColor:"#424242",color:"#151515",promptColor:"#42A5F5",fontFamily:"monospace",fontSize:"18px",lineHeight:"1.5",padding:"1em"},"material-ocean":{background:"#263238",themeToolbarColor:"#37474F",color:"#fff",promptColor:"#C3D82C",fontFamily:"monospace",fontSize:"18px",lineHeight:"1.5",padding:"1em"},matrix:{background:"#0D0208",themeToolbarColor:"#0D0208",color:"#00FF41",promptColor:"#008F11",fontFamily:"monospace",fontSize:"18px",lineHeight:"1.5",padding:"1em"}},m=n.createContext(null),f=function(e){var t=e.children,r=a(a({},s),t.props.themes||{}),o=r[t.props.theme]||r.light;return n.createElement(m.Provider,{value:o},t)},d=n.createContext(null),p=function(e,r,o,a,i,u,s){var f=n.useContext(d),p=f.bufferedContent,h=f.setBufferedContent,x=t.useContext(c),_=t.useContext(m);n.useEffect((function(){if(e){var n,c,m,f,d;n=a,c=void 0,m=void 0,d=function(){var e,c,m,f,d,g,v,b;return l(this,(function(l){switch(l.label){case 0:return e=n.trim().split(" "),c=e[0],m=e.slice(1),f="","clear"===c?(h(""),i(""),r(!1),[2]):(d=t.createElement(t.Fragment,null,p,t.createElement("span",{style:{color:_.promptColor}},o),t.createElement("span",{className:x.lineText+" "+x.preWhiteSpace},a),t.createElement("br",null)),h(d),i(""),n?(g=m.join(" "),c&&u[c]?"function"!=typeof(v=u[c])?[3,2]:[4,v(g)]:[3,4]):[3,7]);case 1:return f=l.sent(),[3,3];case 2:f=v,l.label=3;case 3:return[3,7];case 4:return"function"!=typeof s?[3,6]:[4,s(g)];case 5:return f=l.sent(),[3,7];case 6:f=s,l.label=7;case 7:return b=t.createElement(t.Fragment,null,p,t.createElement("span",{style:{color:_.promptColor}},o),t.createElement("span",{className:x.lineText+" "+x.preWhiteSpace},a),f?t.createElement("span",null,t.createElement("br",null),f):null,t.createElement("br",null)),h(b),r(!1),[2]}}))},new((f=void 0)||(f=Promise))((function(e,n){function t(e){try{o(d.next(e))}catch(e){n(e)}}function r(e){try{o(d.throw(e))}catch(e){n(e)}}function o(n){n.done?e(n.value):new f((function(e){e(n.value)})).then(t,r)}o((d=d.apply(c,m||[])).next())}))}}),[e])},h=function(e,r,a,l,i,u){var s=t.useContext(c),f=t.useContext(m),h=t.useContext(d).appendCommandToHistory,x=t.useRef(null),_=t.useState(""),g=_[0],v=_[1],b=t.useState(!1),C=b[0],y=b[1];t.useEffect((function(){o.isMobile&&r&&x.current.focus()}),[r]),t.useEffect((function(){C&&h(g)}),[C]);var E=o.isMobile&&u?t.createElement("div",{className:s.mobileInput},t.createElement("input",{type:"text",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",value:g,onChange:function(e){return v(e.target.value)},ref:x})):null,w=C?t.createElement(t.Fragment,null,E,t.createElement("div",{className:s.lineText},r&&e?t.createElement("span",{className:s.caret},t.createElement("span",{className:s.caretAfter,style:{background:f.color}})):null)):t.createElement(t.Fragment,null,E,t.createElement("span",{style:{color:f.promptColor}},a),t.createElement("div",{className:s.lineText},t.createElement("span",{className:s.preWhiteSpace},g),r&&e?t.createElement("span",{className:s.caret},t.createElement("span",{className:s.caretAfter})):null));return function(e,t,r,o,a){var l=n.useContext(d),i=l.getPreviousCommand,c=l.getNextCommand,u=function(n){if(e&&a){n.preventDefault();var l=n.key;if("Enter"!==l){var u=null;u="Backspace"===l?t.slice(0,-1):"ArrowUp"===l?i():"ArrowDown"===l?c():l&&1===l.length?t+l:t,r(u),o(!1)}else o(!0)}};n.useEffect((function(){return document.addEventListener("keydown",u),function(){document.removeEventListener("keydown",u)}}))}(r,g,v,y,u),p(C,y,a,g,v,l,i),w};function x(e){var r,o=n.useRef(null),a=n.useContext(c),l=n.useContext(m),i=n.useContext(d).bufferedContent;!function(e,n){t.useEffect((function(){n.current.scrollTop=n.current.scrollHeight}),[e])}(i,o);var u=e.enableInput,s=e.caret,f=e.consoleFocused,p=e.prompt,x=e.commands,_=e.welcomeMessage,g=e.errorMessage,v=h(s,f,p,x,g,u);return n.createElement("div",{ref:o,className:""+a.editor,style:{background:l.background,fontFamily:l.fontFamily,fontSize:l.fontSize,lineHeight:l.lineHeight,padding:null!==(r=l.padding)&&void 0!==r?r:"1em"}},_,i,v)}function _(e){var t,r,a,l,i=n.useRef(null),u=n.useState(!o.isMobile),s=u[0],f=u[1],d=n.useContext(c),p=n.useContext(m);t=i,r=s,a=f,l=function(e){t.current&&!t.current.contains(e.target)?a(!1):o.isMobile?a(!r):a(!0)},n.useEffect((function(){return document.addEventListener("mousedown",l),function(){document.removeEventListener("mousedown",l)}}));var h=e.caret,_=e.theme,g=e.prompt,v=e.commands,b=e.welcomeMessage,C=e.errorMessage,y=e.enableInput,E=e.onFocusChange;n.useEffect((function(){E()}),[s]);var w=n.createElement(x,{caret:h,consoleFocused:s,prompt:g,commands:v,welcomeMessage:b,errorMessage:C,enableInput:y});return n.createElement("div",{ref:i,id:d.terminalContainer,className:d["theme--"+_]},n.createElement("div",{className:""+d.terminal,style:{color:p.color}},w))}function g(e){var t=e.children;return n.createElement(u,null,n.createElement(f,null,t))}function v(e){return n.createElement(g,null,n.createElement(_,a({},e)))}_.propTypes={enableInput:r.bool,caret:r.bool,theme:r.string,prompt:r.string,commands:r.objectOf(r.oneOfType([r.string,r.func,r.node])),welcomeMessage:r.oneOfType([r.string,r.func,r.node]),errorMessage:r.oneOfType([r.string,r.object]),onFocusChange:r.func},_.defaultProps={enableInput:!0,caret:!0,theme:"light",prompt:"~$",commands:{},welcomeMessage:"",errorMessage:"Command not found.",onFocusChange:function(){}};var b=function(e){var t=e.children,r=n.useState(""),o=r[0],a=r[1],l=n.useState([]),i=l[0],c=l[1],u=n.useState(null),s=u[0],m=u[1];n.useEffect((function(){m(i.length)}),[i]);return n.createElement(d.Provider,{value:{bufferedContent:o,setBufferedContent:a,appendCommandToHistory:function(e){e&&c(i.concat(e))},getPreviousCommand:function(){if(0===s)return 0===i.length?"":i[0];var e=i[s-1];return s>0&&m(s-1),e},getNextCommand:function(){if(s+1<=i.length){if(s===i.length)return"";var e=i[s+1];return m(s+1),e}return""}}},t)},C={ReactTerminal:v,TerminalContextProvider:b};exports.ReactTerminal=v,exports.TerminalContextProvider=b,exports.default=C;
